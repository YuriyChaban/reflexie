(function(e,t){"use strict";!function(){"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(e){return e.replace(/^\s+/,"").replace(/\s+$/,"")}),"function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(e,t){if("function"!=typeof e)throw new TypeError("Invalid parameter. Expected 'function', got "+typeof e);var r=Object(this),i=r.length,s=0;for(s;i>s;s++)e.call(t,this[s],s,r)}),"function"!=typeof Array.prototype.indexOf&&(Array.prototype.indexOf=function(e){var r=Object(this),i=-1;return r.forEach(function(r,s){return r===e?(i=s,t):t}),i})}(),!function(e){function r(){var e=document,t=[];if("function"==typeof e.querySelectorAll)t=e.querySelectorAll('link[rel="stylesheet"], style'),t=Array.prototype.slice.call(t,0);else{var r=e.getElementsByTagName("link");if(r.length)for(var i=0,s=r.length;s>i;i++)"stylesheet"===r[i].getAttribute("rel")&&t.push(r[i])}return t}function i(e){this.source=e,this.url=e.href||null,this.cssText=""}function s(e){return this instanceof s?(this.stylesheets=[],this.queueCount=0,this.callback=e||function(){},this.init(),t):new s(e)}i.prototype.load=function(e,t,r){var i=this;if(this.url){var s=new XMLHttpRequest;s.onreadystatechange=function(){4===s.readyState&&(200===s.status?(i.cssText=s.responseText,e.call(r,i)):t.call(r,i))},s.open("GET",this.url,!1),s.send(null)}else this.cssText=this.source.textContent,e.call(r,i)},s.prototype.init=function(){var e,t,s=r(),n=s.length;for(this.queueCount=n,t=0;n>t;t++)e=new i(s[t]),this.stylesheets.push(e),e.load(this.onStyleSheetLoad,this.onStyleSheetError,this)},s.prototype.onStyleSheetLoad=function(){this.queueCount--,this.onComplete.call(this)},s.prototype.onStyleSheetError=function(e){var r,i=this.stylesheets.length;for(r=0;i>r;r++)if(e.source===this.stylesheets[r].source)return this.stylesheets.splice(r,1),this.queueCount--,this.onComplete.call(this),t},s.prototype.onComplete=function(){0===this.queueCount&&this.callback.call(this,this.stylesheets)},e.StyleLoader=s}(e),!function(r){function i(){this.selectorText=null,this.style={},this.type="rule"}function s(){function e(e){var t=e.trim().split(";");return t.length?t.pop().trim():null}function r(e){var r={},i=e.trim().split(";");return i&&i.length?(i.forEach(function(e){if(-1!=e.indexOf(":")){var i,s,n=e.split(":");n[0]!==t&&n[1]!==t&&(i=n[0].trim(),s=n[1].trim().replace(/[\"\']/g,""),r[i]=s)}}),r):r}function s(t,n,o){function l(e,t){for(var r=0;t;){switch(e.charAt(r)){case"{":t++;break;case"}":t--}r++}return r-1}var a,u=t.indexOf("{"),c=new i,h=t.substring(0,u),f=e(h),p=t.substr(u+1,t.length),d=p.indexOf("}"),g=p.indexOf("{");if(u>0){if(c.setSelector(f),o&&(c.setParentRule(o),a=r(h),o.setStyle(a)),g>-1&&d>g){d=l(p,1);var m=p.substring(0,d);a=r(h),c.setStyle(a),c.cssRules=c.cssRules||[],s(m,c.cssRules,c),p=p.substring(d+1,p.length)}else a=r(p.substring(0,d)),c.setStyle(a),p=p.substring(d+1,t.length);s(p,n),n.unshift(c)}}function n(e){if(!e)throw Error("CSSParser.cascadeRules(). No css rules available for cascade");if(!e.length)return e;var t=[],r={},i=[];return e.forEach(function(e){e.cssRules&&(e.cssRules=n(e.cssRules)),r[e.selectorText]?r[e.selectorText]=o({},r[e.selectorText],e):(i.push(e.selectorText),r[e.selectorText]=e)}),i.forEach(function(e){t.push(r[e])},this),r=null,i=null,t}function o(e){var t=Array.prototype.slice.call(arguments,1);return t.forEach(function(t){for(var r in t){if("parentRule"===r)return;e[r]="object"==typeof e[r]&&e[r]?"function"==typeof e[r].slice?n(e[r].concat(t[r])):o({},e[r],t[r]):t[r]}}),e}return{cssRules:[],parse:function(e){e=e.replace(/[\n\t]+/g,"").replace(/\/\*[\s\S]*?\*\//g,"").trim(),s.call(this,e,this.cssRules)},parseCSSDeclaration:function(e){var t=[];return s.call(this,e,t),t.length&&1===t.length?t.pop():null},clear:function(){this.cssRules=[]},cascade:function(e){return e&&e.length?n.call(this,e):(this.cssRules=n.call(this,this.cssRules),t)},doExtend:o}}i.prototype={setSelector:function(e){this.selectorText=e;var t=e.match(/^@([^\s]+)\s*([^{]+)?/);if(t&&t[1]){switch(t[1]){case"template":this.type="template",this.cssRules=[];break;case"slot":this.type="slot";break;default:this.type="unknown"}this.identifier=t[2]||"auto"}},setStyle:function(e){if(!e)throw new TypeError("CSSRule.setStyles(). Invalid input. Expected 'object', got "+e);return this.style=e||{},this.style},setParentRule:function(e){if(!e)throw new TypeError("CSSRule.setParentRule(). Invalid input. Expected 'object', got "+properties);return this.parentRule=e,this.parentRule}},r=r||e,r.CSSParser=s}(e);var r=function(){};r.prototype={bind:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},unbind:function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;this._events[e].length>t;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(e){for(var t=["bind","unbind","trigger"],i=0;t.length>i;i++)e.prototype[t[i]]=r.prototype[t[i]]},"undefined"!=typeof module&&"exports"in module&&(module.exports=r);var i=function(){var e,t;return e=function(e){var r,i,s,n,o=[];for(r=e.split(","),s=0,n=r.length;n>s;s+=1)i=r[s],i.length>0&&o.push(t(i));return o},t=function(e){var t,r=e,i={a:0,b:0,c:0},s=[],n=/(\[[^\]]+\])/g,o=/(#[^\s\+>~\.\[:]+)/g,l=/(\.[^\s\+>~\.\[:]+)/g,a=/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/g,u=/(:[^\s\+>~\.\[:]+)/g,c=/([^\s\+>~\.\[:]+)/g;return t=function(e,t){var n,o,l,a,u,c;if(e.test(r))for(n=r.match(e),o=0,l=n.length;l>o;o+=1)i[t]+=1,a=n[o],u=r.indexOf(a),c=a.length,s.push({selector:a,type:t,index:u,length:c}),r=r.replace(a,Array(c+1).join(" "))},function(){var e=/:not\(([^\)]*)\)/g;e.test(r)&&(r=r.replace(e,"	 $1 "))}(),function(){var e,t,i,s,n=/{[^]*/gm;if(n.test(r))for(e=r.match(n),t=0,i=e.length;i>t;t+=1)s=e[t],r=r.replace(s,Array(s.length+1).join(" "))}(),t(n,"b"),t(o,"a"),t(l,"b"),t(a,"c"),t(u,"b"),r=r.replace(/[\*\s\+>~]/g," "),r=r.replace(/[#\.]/g," "),t(c,"c"),s.sort(function(e,t){return e.index-t.index}),{selector:e,specificity:"0,"+(""+i.a)+","+(""+i.b)+","+(""+i.c),parts:s}},{calculate:e}}();"undefined"!=typeof exports&&(exports.calculate=i.calculate);var s={count:0,models:{},dimValues:{left:"width",top:"height"}};s.utils={assert:function(e,t){var r,i,s=!1;for(r=0,i=t.length;i>r;r++)if(e===t[r]){s=!0;break}return s},toCamelCase:function(e){return e.replace(/\W+(.)/g,function(e,t){return t.toUpperCase()})},toDashedCase:function(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})},keys:function(e){return(Object.keys||function(e,t,r){r=[];for(t in e)return r.hasOwnProperty.call(e,t)&&r.push(t),r}).call(e,e)},matchesSelector:function(e,t){return(Element.prototype.matchesSelector||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||function(e){var t,r,i=document.querySelectorAll(e);for(t=0,r=i.length;r>t;t++)if(i[t]===this)return!0;return!1}).call(e,t)},nthChildSupport:function(){return function(){var e=document.createElement("div");return e.innerHTML+="<p></p>",e.querySelector("p:nth-child(1)")}()},testValue:function(e){var t,r,i=["left","top","right","bottom","width","height"];for(t=0,r=i.length;r>t;t++)if(i[t]===e)return!0;return!1},applyPositioning:function(e,t,r,i){var s,n,o,l,a=t.properties.display,u=i.items,c=i.container;for(this.applyStyles(e,t.selector,{position:"relative",width:c.width,height:c.height,display:a.replace("flex","block")}),s=0,n=r.length;n>s;s++)l=r[s],o=u[s],this.applyStyles(e,l.selector,o)},detectAuto:function(e,t){var r,i=e.style.width,s=e.style.height,n=!1,o=!1;return e.style.width="auto",e.style.height="auto",r=e.getBoundingClientRect(),n=r.width===t.width,o=r.height===t.height,e.style.width=i,e.style.height=s,{width:n,height:o}},getValues:function(t,r){var i,s,n,o,l={},a="",u=["Top","Right","Bottom","Left"];if(e.getComputedStyle)for(o=getComputedStyle(t),"border"===r&&(a="Width"),i=0,s=u.length;s>i;i++)n=u[i],l[n.toLowerCase()]=parseFloat(o[r+n+a]||0);return l.topTotal=l.top+l.bottom,l.leftTotal=l.left+l.right,l},getBorderValues:function(e){return this.getValues(e,"border")},getMarginValues:function(e){return this.getValues(e,"margin")},getPaddingValues:function(e){return this.getValues(e,"padding")},getPristineBox:function(e,t){t=t||"absolute";var r=e.style,i=r.position,s=r.cssFloat,n=r.clear;r.position="relative",r.cssFloat="left",r.clear="both";var o=e.getBoundingClientRect(),l=this.detectAuto(e,o);r.position=i,r.cssFloat=s,r.clear=n;var a=e.getBoundingClientRect();""===e.getAttribute("style")&&e.removeAttribute("style");var u=this.getBorderValues(e),c=this.getMarginValues(e),h=this.getPaddingValues(e),f=c.left+c.right;f+=h.left+h.right,f+=u.left+u.right;var p=c.top+c.bottom;return p+=h.top+h.bottom,p+=u.top+u.bottom,{position:t,left:a.left,top:a.top,width:o.width-(h.left+h.right)-(u.left+u.right),height:o.height-(h.top+h.bottom)-(u.top+u.bottom),debug:{auto:l,values:{width:f,height:p},border:u,margin:c,padding:h,inner:{left:h.left+h.right+(u.left+u.right),top:h.top+h.bottom+(u.top+u.bottom)},width:o.width+f,height:o.height+p}}},storePositionValues:function(e,t){var r,i,s=this.getPristineBox(e.element,"relative"),n=[];for(r=0,i=t.length;i>r;r++)n.push(this.getPristineBox(t[r].element));return{container:s,items:n}},clonePositionValues:function(e,t){var r,i,s,n,o={container:{},items:[]};for(r in e.container)o.container[r]=e.container[r];for(i=0,s=e.items.length;s>i;i++){n={};for(r in e.items[i])n[r]=e.items[i][r];n.debug.properties=t[i].properties,o.items.push(n)}return o},JSONToStyles:function(e,t){var r,i,s=[e+" {"];for(var n in t){if(r=t[n],typeof r==typeof{})break;i=this.testValue(n),i&&"number"==typeof r&&(r=""+r+"px"),s.push(n+": "+r+" !important;")}return s="\n"+s.join("\n	")+"\n}"+"\n"},removeStyles:function(e){var t=document.getElementById(e);t&&t.parentNode.removeChild(t)},applyStyles:function(e,t,r){var i=this.JSONToStyles(t,r),s=document.getElementsByTagName("head")[0],n=document.getElementById(e),o=n||document.createElement("style");n||(o.id=e,o.type="text/css",o.setAttribute("data-flexie","true")),o.styleSheet?o.styleSheet.cssText+=i:o.appendChild(document.createTextNode(i)),s.appendChild(o)},applyPartialValues:function(e,t,r){var i,s,n;for(this.applyStyles(e,t.selector,t.properties),i=0,s=r.length;s>i;i++)n=r[i],this.applyStyles(e,n.selector,n.properties)},flexBasisToPx:function(e,r,i){return e===t||"auto"===e?r:"0"===e?0:"px"===e.slice(-2)?parseFloat(e.slice(0,-2)):"%"===e.slice(-1)?.01*i*parseFloat(e.slice(0,-1)):t}},s.parser={properties:{container:{display:["flex","inline-flex"],"flex-direction":!0,"flex-wrap":!0,"justify-content":!0,"align-items":!0,"align-content":!0,"flex-flow":!0},items:{order:!0,"flex-grow":!0,"flex-shrink":!0,"flex-basis":!0,"align-self":!0,flex:!0}},onStylesLoaded:function(e){var t,r,i,s,o,l,a=new CSSParser,u=n.support;for(t=0,r=e.length;r>t;t++)i=e[t],a.parse(i.cssText);if(0!==a.cssRules.length)for(o=this.filterFlexRules(a.cssRules),t=0,r=o.length;r>t;t++)s=o[t],u===!0?l=new n(s):"partial"===u&&this.mapPartialSupportRules(s)},getPrefix:function(){if(this.prefix)return this.prefix;var e,r,i,s,n=document.createElement("flx"),o=["","ms","webkit","moz","o"],l="FlexOrder";for(e=0,r=o.length;r>e;e++)if(i=o[e],s=i+l,n.style[s]!==t){i=i?"-"+i+"-":i;break}return this.prefix=i,i},mapPartialSupportRules:function(e){var r,i,s,o,l,a,u,c,h,f=this.getPrefix(),p=e.container.properties,d=e.items;if(p.display&&(p.display=f+p.display+"box"),p["flex-flow"]){for(s=p["flex-flow"].split(" "),r=0,i=s.length;i>r;r++)o=s[r],/row|column/.test(o)?p["flex-direction"]=o:("nowrap"===o&&(o="none"),p["flex-wrap"]=o);delete p["flex-flow"]}u={"flex-direction":"flex-direction","flex-wrap":"flex-wrap","justify-content":"flex-pack","align-items":"flex-align","align-content":"flex-line-pack"},c={"flex-start":"start","flex-end":"end","space-between":"justify","space-around":"distribute"};for(h in u)p[h]!==t&&(p[f+u[h]]=c[p[h]]||p[h],delete p[h]);for(u={"align-self":"flex-item-align",order:"flex-order","flex-grow":"flex-positive","flex-shrink":"flex-negative","flex-basis":"flex-preferred-size",flex:"flex"},r=0,i=d.length;i>r;r++){l=d[r].properties;for(h in u)l[h]!==t&&(l[f+u[h]]=c[l[h]]||l[h],delete l[h])}e.partial=!0,a=new n(e)},validateRules:function(e,t){var r,i,s,n,o;for(i in t)if(s=e[i])if(r=r||{},s.length&&s!==!0){for(n=0,o=s.length;o>n;n++)if(t[i]===s[n]){r[i]=t[i];break}}else r[i]=t[i];return r},validateContainer:function(e){var r=this.validateRules(this.properties.container,e),i=(r||{}).display;switch(i){case"flex":case"inline-flex":return r}return t},validateItems:function(e){return this.validateRules(this.properties.items,e)},sortByDescendingSpecificity:function(e,t){var r=parseFloat(e.specificity.split(",").join("")),i=parseFloat(t.specificity.split(",").join(""));return i-r},checkMatchingSelectors:function(e){var t,r,n,o,l,a,u,c,h,f,p,d,g={},m={},v=s.utils.matchesSelector,x=s.utils.keys(e);for(t=x.shift();t;){for(m[t]=m[t]||[t],r=document.querySelectorAll(t),h=0,f=r.length;f>h;h++)for(n=r[h],p=0,d=x.length;d>p;p++)if(l=x[p],l!==t){var y=v(n,l);y===!0&&(m[t]=m[t].concat(x.splice(p,1)),p-=1,d=x.length)}t=x.shift()}for(o in m){for(a=i.calculate(m[o].join()),a.sort(this.sortByDescendingSpecificity),u={},h=0,f=a.length;f>h;h++){n=e[a[h].selector];for(t in n)u[t]=u[t]||n[t]}c=a.shift(),g[c.selector]=u}return g},filterDuplicates:function(e){var t,r,i,s={};for(t=0,r=e.length;r>t;t++){i=e[t],s[i.selectorText]=s[i.selectorText]||{};for(var n in i.style)s[i.selectorText][n]=i.style[n]}return s=this.checkMatchingSelectors(s)},appendNthChildSelector:function(e,t){this.supportsNth=this.supportsNth||s.utils.nthChildSupport();var r,i=this.supportsNth;return i?r=":nth-child("+(t+1)+")":(r="nth-child-"+(t+1),e.className+=" "+r,r="."+r),r},buildSelector:function(e,t,r){var i,s,n,o,l=[e," > "];if(l.push(t.nodeName.toLowerCase()),t.id&&l.push("#"+t.id),t.className)for(i=t.className.trim().split(" "),s=0,n=i.length;n>s;s++)l.push("."+i[s]);if(t.attributes.length)for(s=0;t.attributes.length>s;s++)if(o=t.attributes[s],o.specified)switch(o.name){case"class":case"id":break;default:l.push("["+o.name+"="+o.value+"]")}return 3===l.length&&l.push(this.appendNthChildSelector(t,r)),l.join("")},mapChildren:function(e,t,r){var i,n,o,l,a,u=s.utils.matchesSelector,c=e.childNodes,h=0,f=[];for(i=0,n=c.length;n>i;i++)if(l=c[i],1===l.nodeType){a=!1;for(o in r)if(u(l,o)){f.push({element:l,selector:o+this.appendNthChildSelector(l,h),properties:r[o]}),a=!0;break}a||f.push({element:l,selector:this.buildSelector(t,l,h),properties:{}}),h++}return f},gatherRelationships:function(e,t){var r=[];e=this.filterDuplicates(e),t=this.filterDuplicates(t);var i,s,n,o,l,a,u;for(n in e)for(i=e[n],o=document.querySelectorAll(n),a=0,u=o.length;u>a;a++)l=o[a],l&&(s=this.mapChildren(l,n,t),r.push({container:{element:l,selector:n,properties:i},items:s}));return r},filterFlexRules:function(e){var t,r,i,s,n,o,l=[],a=[];for(t=e.length-1,r=0;t>=r;t--)i=e[t],s=i.style,n=this.validateContainer(s),n&&(i.style=n,l.push(i)),o=this.validateItems(s),o&&(i.style=o,a.push(i));return this.gatherRelationships(l,a)}},s.models.order=function(){this.items.sort(function(e,r){var i=e.properties,s=r.properties;return i&&s?i.order-s.order:t}),this.values.items.sort(function(e,r){var i=e.debug.properties,s=r.debug.properties;return i&&s?i.order-s.order:t})},s.models.alignSelf=function(e,t){var r,i,s,n,o,l,a,u,c,h,f,p,d,g,m,v,x,y=this.crossStart,b=this.crossSize,S=this.lines,w=this.values,C=this.mainSize,T=w.container,k=T[C],R=y+"Total",N="wrap-reverse"===t["flex-wrap"],E="nowrap"===t["flex-wrap"],A="stretch"===t["align-content"],P=this.remainderSize,z=T.debug.padding[y],M=this.reverser;for(i=0,s=S.length;s>i;i++){for(l=S[i],A?(m=S[i+1],v=k+T.debug.padding[y],m&&(m=m.items[0],N?v-=m[y]+m.debug.inner[y]+m.debug.margin[R]:v=m[y]),v-=z,x=v):x=l.maxItemSize,n=0,o=l.items.length;o>n;n++)if(a=l.items[n],r=1,g=P,a.debug&&a.debug.properties){if(c=a.debug.properties["align-self"],"auto"===c&&(c=t["align-items"]),h="flex-start"===c,f="center"===c,p="stretch"===c,d="baseline"===c,p&&E)u=w.container[b]/S.length,a.debug.auto[b]&&(i&&(a[y]+=(u-a[b])*i),a[b]=u-a.debug.inner[y]-a.debug.margin[R]);else if(p&&a.debug.auto[b]){var V=a[b];a[b]=x-a.debug.inner[y]-a.debug.margin[R],N&&(a[y]+=V-a[b])}p||h||d||(f&&(r=.5,g*=.5),E||A||(g=0),u=l.maxItemSize,a[y]-=a.debug.margin[R]*r*M,a[y]+=(g+(u-(a[b]+a.debug.inner[y]))*r)*M)}A&&(z+=v)}},s.models.flexGrow=function(e,r){var i,n,o,l,a,u,c,h,f,p,d,g,m,v,x,y,b,S,w,C,T=this.values,k=T.container,R=this.mainStart,N=this.mainSize,E=k[N],A=this.lines,P=s.utils,z=["row-reverse","column-reverse"],M=r["flex-direction"],V=P.assert(M,z);for(i=0,n=A.length;n>i;i++){for(l=A[i],a=l.items.length,v=Array(a),x=Array(a),w=Array(a),u=0,o=0;a>o;o++)x[o]=l.items[o].debug.properties["flex-basis"]===t||"auto"===l.items[o].debug.properties["flex-basis"]?l.items[o][N]:parseFloat(l.items[o].debug.properties["flex-basis"].slice(0,-2)),u+=x[o]+l.items[o].debug.padding[R+"Total"]+l.items[o].debug.border[R+"Total"]+l.items[o].debug.margin[R+"Total"];for(c=E-u,y=0>c?"flex-shrink":"flex-grow",S=0>c?"min-":"max-",b=0>c?-1:1,h=0,o=0;a>o;o++)1===b?w[o]=parseFloat(l.items[o].debug.properties["flex-grow"]):(isNaN(l.items[o].debug.properties["flex-shrink"])&&(l.items[o].debug.properties["flex-shrink"]=1),w[o]=x[o]*l.items[o].debug.properties["flex-shrink"]),h+=w[o];if(0!==h){for(m=1;m;)for(m=0,o=0;a>o;o++)f=c*w[o]/h,p=l.items[o].debug.properties[S+N],isNaN(v[o])&&(0>x[o]+f||p!==t&&b*(l.items[o][N]+f)>b*p)&&(m=1,v[o]=0>x[o]+f?-x[o]:p-x[o],h-=w[o],c-=v[o],0===h&&(h=1));for(m=1;m;)for(m=0,o=0;a>o;o++)f=c*w[o]/h,isNaN(v[o])&&b*l.items[o][N]>b*(x[o]+f)&&(m=1,v[o]=l.items[o][N]-x[o],h-=w[o],c-=v[o],0===h&&(h=1));if(!(0>=c))for(d=0,g=V?-1:1,o=0;a>o;o++)f=isNaN(v[o])?c*w[o]/h:v[o],C=l.items[o][N],l.items[o][N]=x[o]+f,l.items[o][R]+=V?-d-l.items[o][N]+C:d,d+=l.items[o][N]-C}}},s.models.flexDirection=function(e){var t,r,i,n=this.values,o=n.container,l=n.items,a=s.utils,u=["column","column-reverse"],c=["row-reverse","column-reverse"],h=a.assert(e,u),f=a.assert(e,c),p=h?"left":"top",d=h?"top":"left",g=s.dimValues[d],m=s.dimValues[p],v=0,x=0,y=d+"Total",b=o[g];for(t=0,r=l.length;r>t;t++)i=l[t],i[d]=x+o.debug.padding[d],i[p]=x+o.debug.padding[p],f?i[d]=b+o.debug.padding[d]-(i[g]+i.debug.inner[d])-i.debug.margin[y]-v:i[d]+=v,v+=i[g]+i.debug.margin[y],h&&!f?v+=i.debug.inner[d]:f&&(v+=i.debug.inner[d]);this.crossStart=p,this.mainStart=d,this.mainSize=g,this.crossSize=m},s.models.flexWrap=function(e,t){var r,i,n,o,l,a,u,c,h=this.values,f=h.items,p="wrap"===e,d="wrap-reverse"===e,g=this.crossStart,m=this.mainStart,v=this.mainSize,x=this.crossSize,y=h.container,b=y[v],S=[],w={items:[]},C=s.utils,T=["column","column-reverse"],k=["row-reverse","column-reverse"],R=t["flex-direction"],N=C.assert(R,T),E=C.assert(R,k),A=m+"Total",P=g+"Total";this.currMainStart=0,this.currLineLength=0,this.prevMainStart=0,this.currCrossStart=0,this.prevCrossStart=0;var z=this.currMainStart,M=this.currLineLength,V=this.prevMainStart,F=this.currCrossStart,j=this.prevCrossStart,L=E?-1:1,B=d?-1:1;if(p||d){var I=b,O={top:"bottom",left:"right"},_=O[m];if(d){var q=0;for(r=0,i=f.length;i>r;r++)l=f[r],q=Math.max(q,l[x]+l.debug.inner[g]+l.debug.margin[P]);var D=b-q;for(r=0,i=f.length;i>r;r++)l=f[r],l[g]+=D+(q-(l[x]+l.debug.inner[g]+l.debug.margin[P]))}for(r=0,i=f.length;i>r;r++){if(l=f[r],c=C.flexBasisToPx(l.debug.properties["flex-basis"],l[v],b)+l.debug.inner[m]+l.debug.margin[A],M+c>I){if(S.push(w),w={items:[]},V+=z,j+=F,N&&u){var W;W=E?l[m]-y.debug.padding[m]+l[v]+l.debug.inner[m]+l.debug.margin[A]-V*L-I:V*L-(l[m]-y.debug.padding[m]),W>0&&(V-=W)}z=0,M=0,F=0}l[m]-=V*L,l[g]+=j*B,z+=l[v]+l.debug.inner[m]+l.debug.margin[A],M+=c,F=Math.max(F,l[x]+l.debug.inner[g]+l.debug.margin[P]),N&&(u&&(z+=Math.min(l.debug.margin[m],u.debug.margin[_])),u=l),w.items.push(l)}}else w.items=h.items;if(S.push(w),V=0,!N&&!E)for(r=0,i=S.length;i>r;r++)for(a=S[r].items,n=0,o=a.length;o>n;n++)l=a[n],u&&(V+=u.debug.inner[m],l[m]+=V),u=l;delete this.currMainStart,delete this.currLineLength,delete this.prevMainStart,delete this.currCrossStart,delete this.prevCrossStart,this.lines=S,this.reverser=B},s.models.justifyContent=function(e,t){var r,i,n,o,l,a,u,c,h,f,p=this.values,d=s.utils,g=p.container,m=this.mainStart,v=this.mainSize,x=g[v],y="flex-start"===e,b="center"===e,S="space-between"===e,w="space-around"===e,C=["row-reverse","column-reverse"],T=d.assert(t["flex-direction"],C),k=this.lines,R=1;T=T?-1:1;var N=m+"Total";if(!y)for(r=0,i=k.length;i>r;r++){for(h=0,l=k[r],a=l.items,o=a.length,R=1,c=x,n=0;o>n;n++)u=a[n],c-=u[v]+u.debug.inner[m]+u.debug.margin[N];for((b||w&&0>c)&&(R=.5),c*=R,n=0,(S||w&&c>=0)&&(n=1,c=Math.max(0,c),c/=o-(S?1:0),h=c,w&&(f=.5*c,a[0][m]+=f*T,c+=f));o>n;n++)a[n][m]+=c*T,c+=h}},s.models.alignItems=function(e,t){var r,i,s,n,o,l,a=this.crossStart,u=this.crossSize,c=this.lines,h=this.values,f=this.mainSize,p=h.container[f],d=a+"Total",g="nowrap"===t["flex-wrap"],m=p;for(r=0,i=c.length;i>r;r++){for(o=c[r],s=0,n=o.items.length;n>s;s++)l=o.items[s],o.maxItemSize=Math.max(o.maxItemSize||0,l[u]+l.debug.inner[a]+l.debug.margin[d]);m-=o.maxItemSize}m/=c.length,this.remainderSize=g?m:Math.max(0,m)},s.models.alignContent=function(e,t,r){var i,s,n,o,l,a,u,c,h,f=this.values,p=f.container,d=this.crossStart,g=this.crossSize,m=p[g],v="flex-start"===e,x="center"===e,y="space-between"===e,b="space-around"===e,S="stretch"===t["align-content"],w="alignContentStretch"===r,C="nowrap"===t["flex-wrap"],T=this.lines,k=1,R=d+"Total",N=this.reverser,E=T.length,A=0;if(!(C&&1>=T.length||(u=m,v||S&&!w||!S&&w))){for(i=0,s=E;s>i;i++){for(c=0,l=T[i].items,n=0,o=l.length;o>n;n++)a=l[n],c=Math.max(c,a[g]+a.debug.inner[d]+a.debug.margin[R]);u-=c}if(A=0,c=0,(y||b||S)&&0>=u){if(!b)return;b=!1,x=!0}if(x&&(k=.5),(y||b||S)&&(A=1,u/=E-(y?1:0),c=u,b)){for(h=.5*u,l=T[0],n=0,o=l.items.length;o>n;n++)a=l.items[n],a[d]+=h*N;u+=h}for(s=E;s>A;A++){for(l=T[A],n=0,o=l.items.length;o>n;n++)a=l.items[n],a[d]+=u*k*N;u+=c}}};var n=function(e){return this.settings=e,this.box(e)};n.prototype={models:{order:s.models.order,flexDirection:s.models.flexDirection,flexWrap:s.models.flexWrap,flexGrow:s.models.flexGrow,alignContentStretch:s.models.alignContent,justifyContent:s.models.justifyContent,alignItems:s.models.alignItems,alignSelf:s.models.alignSelf,alignContent:s.models.alignContent},generateUID:function(e){if(this.uid)return this.uid;var t=e.selector;return t=t.replace(/\#/g,"id-"),t=t.replace(/\./g,"class-"),t=t.replace(/\:/g,"pseudo-"),t=t.replace(/\s/g,"-"),this.uid="flexie-"+t+"-"+ ++s.count,this.uid},expandFlexFlow:function(e){var t,r,i={display:"flex","flex-direction":"row","flex-wrap":"nowrap","justify-content":"flex-start","align-items":"stretch","align-content":"stretch"};for(var s in e){var n=e[s];if("flex-flow"===s)for(n=n.split(" "),t=0,r=n.length;r>t;t++){var o=n[t];/row|column/.test(o)?i["flex-direction"]=o:i["flex-wrap"]=o}else i[s]=n}return i},expandFlex:function(e){var t={"align-self":"auto",order:0,"flex-grow":0,"flex-shrink":1,"flex-basis":"auto"};for(var r in e){var i,s,n,o=e[r];if("flex"===r)switch(o=o.split(" "),o.length){case 1:if(i=o[0],isNaN(i))switch(i){case"initial":break;case"auto":t["flex-grow"]=1,t["flex-basis"]=i;break;case"none":t["flex-shrink"]=0;break;default:t["flex-grow"]=1,t["flex-basis"]=i}else t["flex-grow"]=i,t["flex-basis"]="0px";break;case 2:var l=!isNaN(o[0])&&!isNaN(o[1]);if(l)t["flex-grow"]=o[0],t["flex-shrink"]=o[1];else for(s=0,n=o.length;n>s;s++)i=o[s],isNaN(i)?t["flex-basis"]=i:t["flex-grow"]=i;break;case 3:var a,u,c;for(s=0,n=o.length;n>s;s++)i=o[s],isNaN(i)?c||(t["flex-basis"]=i,c=!0):a?u||(t["flex-shrink"]=i,u=!0):(t["flex-grow"]=i,a=!0)}else t[r]=o}return t},render:function(e){var t=s.utils;if(this.uid=this.generateUID(e.container),t.removeStyles(this.uid),this.container=e.container,this.items=e.items,e.partial!==!0){var r,i,o;for(r=0,i=this.items.length;i>r;r++)o=this.items[r],o.properties=this.expandFlex(o.properties);this.dom=this.dom||{},this.dom.values=t.storePositionValues(this.container,this.items),this.values=t.clonePositionValues(this.dom.values,this.items);var l=this.expandFlexFlow(this.container.properties),a=this.models;for(var u in a){var c=t.toDashedCase(u);a[u].call(this,l[c],l,u)}t.applyPositioning(this.uid,this.container,this.items,this.values)}else t.applyPartialValues(this.uid,this.container,this.items);n.event.trigger("complete",{uid:this.uid,container:this.container,items:this.items})},box:function(e){return n.support===!0?!0:this.render(e)}},n.support=function(){var e,r,i,s="webkit moz o ms".split(" "),n=document.createElement("flx"),o=function(e){return n.style[e]!==t},l=function(t){var n=o(t);if(!n)for(t=t.charAt(0).toUpperCase()+t.slice(1),e=0,r=s.length;r>e&&(i=s[e]+t,!(n=o(i)));e++);return n},a=l("flexWrap");return a&&(a=l("flexOrder")?"partial":a),a}(),s.event={handlers:{redraw:function(){var e=n.options||{};"function"==typeof e.redraw&&e.redraw.apply(n,arguments)},complete:function(){var e=n.options||{};"function"==typeof e.complete&&e.complete.apply(n,arguments)}},emitter:function(){var e=new r,t=s.event.handlers;return e.bind("redraw",t.redraw),e.bind("complete",t.complete),e}},n.init=function(e){if(n.support===!0)return!0;if(!("querySelectorAll"in document))throw Error("Flexie needs `document.querySelectorAll`, but your browser doesn't support it.");return this.options=e,this.event=new s.event.emitter(e),this.redraw=function(){return this.event.trigger("redraw")},new StyleLoader(function(){return function(e){s.parser.onStylesLoaded(e)}}())},"function"==typeof define&&define.amd?define(function(){return n}):e.Flexie=n})(window);